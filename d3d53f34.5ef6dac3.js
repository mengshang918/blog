(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{125:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return b})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return l})),a.d(t,"default",(function(){return o}));var r=a(2),p=a(7),n=(a(0),a(191)),b={id:"179673e977b3c3f9ad055a4b4a1e4eff",title:"puppeteer"},c={unversionedId:"\u6d4b\u8bd5/E2E\u6d4b\u8bd5/puppeteer/179673e977b3c3f9ad055a4b4a1e4eff",id:"\u6d4b\u8bd5/E2E\u6d4b\u8bd5/puppeteer/179673e977b3c3f9ad055a4b4a1e4eff",isDocsHomePage:!1,title:"puppeteer",description:"- puppeteer \u7528\u9014",source:"@site/../docs/\u6d4b\u8bd5/E2E\u6d4b\u8bd5/puppeteer/puppeteer.md",slug:"/\u6d4b\u8bd5/E2E\u6d4b\u8bd5/puppeteer/179673e977b3c3f9ad055a4b4a1e4eff",permalink:"/blog/docs/\u6d4b\u8bd5/E2E\u6d4b\u8bd5/puppeteer/179673e977b3c3f9ad055a4b4a1e4eff",editUrl:"https://github.com/mengshang918/blog/edit/master/website/../docs/\u6d4b\u8bd5/E2E\u6d4b\u8bd5/puppeteer/puppeteer.md",version:"current",sidebar:"sidebar",previous:{title:"TODO",permalink:"/blog/docs/\u6d4b\u8bd5/E2E\u6d4b\u8bd5/cypress/6232f9a6ecbaa54081dbeaa600e71d8c"},next:{title:"enzyme",permalink:"/blog/docs/\u6d4b\u8bd5/\u5355\u5143\u6d4b\u8bd5/enzyme/ff68fd239a281351a53d6e0b62b17fe7"}},l=[{value:"puppeteer \u7528\u9014",id:"puppeteer-\u7528\u9014",children:[]},{value:"\u5e38\u89c1\u7528\u6cd5",id:"\u5e38\u89c1\u7528\u6cd5",children:[]},{value:"\u53c2\u8003",id:"\u53c2\u8003",children:[]}],i={rightToc:l};function o(e){var t=e.components,a=Object(p.a)(e,["components"]);return Object(n.b)("wrapper",Object(r.a)({},i,a,{components:t,mdxType:"MDXLayout"}),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object(r.a)({parentName:"li"},{href:"#puppeteer-%E7%94%A8%E9%80%94"}),"puppeteer \u7528\u9014")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object(r.a)({parentName:"li"},{href:"#%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95"}),"\u5e38\u89c1\u7528\u6cd5")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object(r.a)({parentName:"li"},{href:"#%E5%8F%82%E8%80%83"}),"\u53c2\u8003"))),Object(n.b)("p",null,"\u672c\u6587\u4e3a\u4f7f\u7528 puppeteer \u8fdb\u884c\u81ea\u52a8\u5316\u6d4b\u8bd5\u7684\u5b9e\u8df5\u603b\u7ed3\uff0c\u6301\u7eed\u66f4\u65b0\u3002"),Object(n.b)("h2",{id:"puppeteer-\u7528\u9014"},"puppeteer \u7528\u9014"),Object(n.b)("blockquote",null,Object(n.b)("ul",{parentName:"blockquote"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"\u7f51\u9875\u622a\u56fe\u6216\u8005\u751f\u6210 PDF")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"\u722c\u53d6 SPA \u6216 SSR \u7f51\u7ad9")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"UI \u81ea\u52a8\u5316\u6d4b\u8bd5\uff0c\u6a21\u62df\u8868\u5355\u63d0\u4ea4\uff0c\u952e\u76d8\u8f93\u5165\uff0c\u70b9\u51fb\u7b49\u884c\u4e3a")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"\u6355\u83b7\u7f51\u7ad9\u7684\u65f6\u95f4\u7ebf\uff0c\u5e2e\u52a9\u8bca\u65ad\u6027\u80fd\u95ee\u9898")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a\u6700\u65b0\u7684\u81ea\u52a8\u5316\u6d4b\u8bd5\u73af\u5883\uff0c\u4f7f\u7528\u6700\u65b0\u7684 js \u548c\u6700\u65b0\u7684 Chrome \u6d4f\u89c8\u5668\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"\u6d4b\u8bd5 Chrome \u6269\u5c55\u7a0b\u5e8f")))),Object(n.b)("h2",{id:"\u5e38\u89c1\u7528\u6cd5"},"\u5e38\u89c1\u7528\u6cd5"),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u975e\u65e0\u5934\u6a21\u5f0f\u3001\u5168\u5c4f"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"puppeteer.launch({\n  headless: false, //\u975e\u65e0\u5934\u6a21\u5f0f\n  defaultViewport: null, //\u9875\u9762\u7a97\u53e3\u968f\u6d4f\u89c8\u5668\u5927\u5c0f\u5c55\u793a \u6216\u8005 defaultViewport:{width:0,height:0}\n  args: [\n    '--start-fullscreen', //\u6d4f\u89c8\u5668\u5168\u5c4f\n  ],\n})\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u7b49\u5f85\u6307\u5b9a\u7684\u9009\u62e9\u5668\u5339\u914d\u7684\u5143\u7d20\u51fa\u73b0\u5728\u9875\u9762\u4e2d"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"page.waitForSelector(selector[, options])\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u70b9\u51fb\u67d0\u4e2a\u5143\u7d20"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"page.click(selector)\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u70b9\u51fb\u67d0\u4e2a\u8868\u5355\u5143\u7d20\u5e76\u8f93\u5165"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"//\u5c06options\u8bbe\u4e3a{delay:20}\uff0c\u8f93\u5165\u65f6\u4f1a\u5ef6\u8fdf20ms,\u66f4\u6709feel\u54e6\npage.type(selector, text[, options])\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u83b7\u53d6\u9875\u9762\u5143\u7d20"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"page.$(selector) //\u7c7b\u4f3cdocument.querySelector\npage.$$(selector) //\u7c7b\u4f3cdocument.querySelectorAll\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u6253\u5f00\u67d0\u4e2a\u9875\u9762"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"page.goto(url[, options])\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u5f53\u70b9\u51fb\u67d0\u4e2a\u4f1a\u5f15\u8d77\u8df3\u8f6c\u8df3\u8f6c\u7684\u5143\u7d20\u65f6"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"await Promise.all([page.waitForNavigation(), page.click(selector)])\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u76d1\u542c\u6d4f\u89c8\u5668\u6253\u5f00\u65b0\u7684\u9875\u9762"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"browser.on('targetcreated', async (target) => {\n  const page = await target.page()\n})\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u5173\u95ed\u6d4f\u89c8\u5668"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"browser.close()\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u6267\u884c\u67d0\u6bb5 js \u4ee3\u7801"),Object(n.b)("pre",{parentName:"li"},Object(n.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"page.evaluate(() => {\n  //js\u4ee3\u7801\n})\n"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},"\u8bf7\u6c42\u62e6\u622a"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"page.on('request',request=>{}) \u8bf7\u6c42\u89e6\u53d1")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"page.on('requestfailed',request=>{}) \u8bf7\u6c42\u5931\u8d25\u89e6\u53d1")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"page.on('requestfinished',request=>{}) \u8bf7\u6c42\u5b8c\u6210\u89e6\u53d1")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"page.on('response',response=>{}) \u8bf7\u6c42\u8fd4\u56de response \u65f6\u89e6\u53d1")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://zhaoqize.github.io/puppeteer-api-zh_CN/#?product=Puppeteer&version=v1.20.0&show=api-class-request"}),"requset \u5bf9\u8c61")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"requset.respond() \u5b8c\u6210\u8bf7\u6c42\u540e\u4f1a\u8fd4\u56de\u4e00\u4e2a\u54cd\u5e94"),Object(n.b)("li",{parentName:"ul"},"request.continue() \u7ee7\u7eed\u8bf7\u6c42"),Object(n.b)("li",{parentName:"ul"},"response.abort() \u4e2d\u65ad\u8bf7\u6c42")),Object(n.b)("p",{parentName:"li"},"\u4ee5\u4e0a\u90fd\u9700\u8981\u5f00\u542f",Object(n.b)("inlineCode",{parentName:"p"},"page.setRequestInterception(true)"),"\u6765\u5f00\u542f\u62e6\u622a")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://zhaoqize.github.io/puppeteer-api-zh_CN/#?product=Puppeteer&version=v1.20.0&show=api-class-response"}),"response \u5bf9\u8c61")))))),Object(n.b)("h2",{id:"\u53c2\u8003"},"\u53c2\u8003"),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/transitive-bullshit/awesome-puppeteer"}),"git example"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://blog.csdn.net/zdplife/article/details/98112895#commentBox"}),"\u7ed3\u5408\u9879\u76ee\u6765\u8c08\u8c08 Puppeteer"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://zhaoqize.github.io/puppeteer-api-zh_CN/#?product=Puppeteer&version=v1.20.0&show=api-overview"}),"puppeteer \u4e2d\u6587\u6587\u6863"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://pptr.dev/"}),"puppeteer \u82f1\u6587\u6587\u6863"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://try-puppeteer.appspot.com/"}),"\u5728\u7ebf\u6d4b\u8bd5"))),Object(n.b)("li",{parentName:"ol"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/GoogleChrome/puppeteer"}),"puppeteer \u5b98\u7f51")))))}o.isMDXComponent=!0},191:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return j}));var r=a(0),p=a.n(r);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,p=function(e,t){if(null==e)return{};var a,r,p={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(p[a]=e[a]);return p}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(p[a]=e[a])}return p}var i=p.a.createContext({}),o=function(e){var t=p.a.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},u=function(e){var t=o(e.components);return p.a.createElement(i.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return p.a.createElement(p.a.Fragment,{},t)}},s=p.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,n=e.originalType,b=e.parentName,i=l(e,["components","mdxType","originalType","parentName"]),u=o(a),s=r,j=u["".concat(b,".").concat(s)]||u[s]||m[s]||n;return a?p.a.createElement(j,c(c({ref:t},i),{},{components:a})):p.a.createElement(j,c({ref:t},i))}));function j(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=a.length,b=new Array(n);b[0]=s;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,b[1]=c;for(var i=2;i<n;i++)b[i]=a[i];return p.a.createElement.apply(null,b)}return p.a.createElement.apply(null,a)}s.displayName="MDXCreateElement"}}]);