(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{243:function(e,r,n){"use strict";n.d(r,"a",(function(){return l})),n.d(r,"b",(function(){return u}));var t=n(0),a=n.n(t);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function c(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function s(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=a.a.createContext({}),b=function(e){var r=a.a.useContext(p),n=r;return e&&(n="function"==typeof e?e(r):i(i({},r),e)),n},l=function(e){var r=b(e.components);return a.a.createElement(p.Provider,{value:r},e.children)},m={inlineCode:"code",wrapper:function(e){var r=e.children;return a.a.createElement(a.a.Fragment,{},r)}},j=a.a.forwardRef((function(e,r){var n=e.components,t=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),l=b(n),j=t,u=l["".concat(c,".").concat(j)]||l[j]||m[j]||o;return n?a.a.createElement(u,i(i({ref:r},p),{},{components:n})):a.a.createElement(u,i({ref:r},p))}));function u(e,r){var n=arguments,t=r&&r.mdxType;if("string"==typeof e||t){var o=n.length,c=new Array(o);c[0]=j;var i={};for(var s in r)hasOwnProperty.call(r,s)&&(i[s]=r[s]);i.originalType=e,i.mdxType="string"==typeof e?e:t,c[1]=i;for(var p=2;p<o;p++)c[p]=n[p];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}j.displayName="MDXCreateElement"},42:function(e,r,n){"use strict";n.r(r),n.d(r,"frontMatter",(function(){return c})),n.d(r,"metadata",(function(){return i})),n.d(r,"rightToc",(function(){return s})),n.d(r,"default",(function(){return b}));var t=n(2),a=n(7),o=(n(0),n(243)),c={id:"f7964c8f9054ea24043d6089ad339147",title:"\u4f7f\u7528ajv-errors\u751f\u6210json-schema\u9519\u8bef\u4fe1\u606f"},i={unversionedId:"ECMASCript/JSONSchema/f7964c8f9054ea24043d6089ad339147",id:"ECMASCript/JSONSchema/f7964c8f9054ea24043d6089ad339147",isDocsHomePage:!1,title:"\u4f7f\u7528ajv-errors\u751f\u6210json-schema\u9519\u8bef\u4fe1\u606f",description:"- \u4f7f\u7528 ajv-errors \u751f\u6210 json-schema \u9519\u8bef\u4fe1\u606f",source:"@site/../docs/ECMASCript/JSONSchema/\u4f7f\u7528ajv-errors\u751f\u6210json-schema\u9519\u8bef\u4fe1\u606f.md",slug:"/ECMASCript/JSONSchema/f7964c8f9054ea24043d6089ad339147",permalink:"/blog/docs/ECMASCript/JSONSchema/f7964c8f9054ea24043d6089ad339147",editUrl:"https://github.com/mengshang918/blog/edit/master/website/../docs/ECMASCript/JSONSchema/\u4f7f\u7528ajv-errors\u751f\u6210json-schema\u9519\u8bef\u4fe1\u606f.md",version:"current",sidebar:"sidebar",previous:{title:"JSONSchema",permalink:"/blog/docs/ECMASCript/JSONSchema/718deb34c13a2d51e3c2ba69f472fce9"},next:{title:"\u4f7f\u7528ajv-keywords\u7ed9jsonschema\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5173\u952e\u5b57",permalink:"/blog/docs/ECMASCript/JSONSchema/5237e232cb7cb852580db82169fdcaeb"}},s=[{value:"\u4f7f\u7528 ajv-errors \u751f\u6210 json-schema \u9519\u8bef\u4fe1\u606f",id:"\u4f7f\u7528-ajv-errors-\u751f\u6210-json-schema-\u9519\u8bef\u4fe1\u606f",children:[]},{value:"\u7528\u6cd5",id:"\u7528\u6cd5",children:[]},{value:"\u53c2\u8003",id:"\u53c2\u8003",children:[]}],p={rightToc:s};function b(e){var r=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(t.a)({},p,n,{components:r,mdxType:"MDXLayout"}),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(t.a)({parentName:"li"},{href:"#%E4%BD%BF%E7%94%A8-ajv-errors-%E7%94%9F%E6%88%90-json-schema-%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF"}),"\u4f7f\u7528 ajv-errors \u751f\u6210 json-schema \u9519\u8bef\u4fe1\u606f")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(t.a)({parentName:"li"},{href:"#%E7%94%A8%E6%B3%95"}),"\u7528\u6cd5")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(t.a)({parentName:"li"},{href:"#%E5%8F%82%E8%80%83"}),"\u53c2\u8003"))),Object(o.b)("h2",{id:"\u4f7f\u7528-ajv-errors-\u751f\u6210-json-schema-\u9519\u8bef\u4fe1\u606f"},"\u4f7f\u7528 ajv-errors \u751f\u6210 json-schema \u9519\u8bef\u4fe1\u606f"),Object(o.b)("p",null,"ajv-errors \u7ed9 Json-schema \u6dfb\u52a0\u4e86\u4e00\u4e2a",Object(o.b)("inlineCode",{parentName:"p"},"errorMessage"),"\u5173\u952e\u5b57,\u901a\u8fc7\u8fd9\u4e2a\u5173\u952e\u5b57\u6765\u8f93\u51fa\u9519\u8bef\u4fe1\u606f"),Object(o.b)("pre",null,Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-js"}),"const Ajv = require('ajv')\nconst ajv = new Ajv({ allErrors: true, jsonPointers: true })\nrequire('ajv-errors')(ajv)\n//\u4e00\u4e2ajson schema\u89c4\u8303\u7684\u5bf9\u8c61\nconst schema = {}\n//\u5f85\u6821\u9a8c\u7684json\u5bf9\u8c61\nconst data = {}\nconst validate = ajv.compile(schema)\nvalidate(data) //\u8fd4\u56deboolean\uff0c\u662f\u5426\u6821\u9a8c\u901a\u8fc7\nvalidate.errors //\u9519\u8bef\u8be6\u7ec6\u4fe1\u606f\n")),Object(o.b)("h2",{id:"\u7528\u6cd5"},"\u7528\u6cd5"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"\u5355\u4e2a\u9519\u8bef\u4fe1\u606f"),Object(o.b)("p",{parentName:"li"},"\u7528\u4e00\u6761\u6d88\u606f\u66ff\u6362\u5f53\u524d schema \u548c sub schema \u4e2d\u7684\u6240\u6709\u9519\u8bef"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-json"}),"var schema = {\n  type: 'object',\n  required: ['foo'],\n  properties: {\n    foo: { type: 'integer' }\n  },\n  additionalProperties: false,\n  errorMessage: 'should be an object with an integer property foo only'\n};\n"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"\u5173\u952e\u5b57\u9519\u8bef"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-json"}),"var schema = {\n  type: 'object',\n  required: ['foo'],\n  properties: {\n    foo: { type: 'integer' }\n  },\n  additionalProperties: false,\n  errorMessage: {\n    type: 'should be an object', // will not replace internal \"type\" error for the property \"foo\"\n    required: 'should have property foo',\n    additionalProperties: 'should not have properties other than foo'\n  }\n};\n")),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},"required"),"\u548c",Object(o.b)("inlineCode",{parentName:"p"},"dependencies"),"\u53ef\u4ee5\u4f7f\u7528\u5bf9\u8c61\u6307\u5b9a\u7279\u5b9a\u7684\u5c5e\u6027\u7684\u9519\u8bef\u4fe1\u606f\u3002\u793a\u4f8b\u5982\u4e0b\uff1a"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-json"}),"var schema = {\n  type: 'object',\n  required: ['foo', 'bar'],\n  properties: {\n    foo: { type: 'integer' },\n    bar: { type: 'string' }\n  },\n  errorMessage: {\n    type: 'should be an object', // will not replace internal \"type\" error for the property \"foo\"\n    required: {\n      foo: 'should have an integer property \"foo\"',\n      bar: 'should have a string property \"bar\"'\n    }\n  }\n};\n"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"\u5c5e\u6027\u7684\u9519\u8bef\u4fe1\u606f"),Object(o.b)("p",{parentName:"li"},"\u65e0\u8bba\u5c5e\u6027\u662f\u5728\u54ea\u91cc\u521b\u5efa\u7684"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-json"}),"var schema = {\n  type: 'object',\n  required: ['foo', 'bar'],\n  allOf: [{\n    properties: {\n      foo: { type: 'integer', minimum: 2 },\n      bar: { type: 'string', minLength: 2 }\n    },\n    additionalProperties: false\n  }],\n  errorMessage: {\n    properties: {\n      foo: 'data.foo should be integer >= 2',\n      bar: 'data.bar should be string with length >= 2'\n    }\n  }\n};\n"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"\u9ed8\u8ba4\u9519\u8bef\u4fe1\u606f"),Object(o.b)("p",{parentName:"li"},"\u5f53 errorMessage \u662f\u4e00\u4e2a\u5bf9\u8c61\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u9ed8\u8ba4\u9519\u8bef\u6765\u515c\u5e95\u9519\u8bef\u3002"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-json"}),"var schema = {\n  type: 'object',\n  required: ['foo', 'bar'],\n  allOf: [{\n    properties: {\n      foo: { type: 'integer', minimum: 2 },\n      bar: { type: 'string', minLength: 2 }\n    },\n    additionalProperties: false\n  }],\n  errorMessage: {\n    type: 'data should be an object',\n    properties: {\n      foo: 'data.foo should be integer >= 2',\n      bar: 'data.bar should be string with length >= 2'\n    },\n    _: 'data should have properties \"foo\" and \"bar\" only'\n  }\n};\n"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"\u6a21\u677f\u8bed\u6cd5"),Object(o.b)("p",{parentName:"li"},"\u914d\u5408 json pointer \u53ef\u4ee5\u5c55\u793a\u5f53\u524d json \u7684\u5b9e\u9645\u503c"),Object(o.b)("pre",{parentName:"li"},Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-json"}),'var schema = {\n  "type": "object",\n  "properties": {\n    "size": {\n      "type": "number",\n      "minimum": 4\n    }\n  },\n  "errorMessage": {\n    "properties": {\n      "size": "size should be a number bigger or equal to 4, current value is ${/size}"\n    }\n  }\n}\n')))),Object(o.b)("p",null,"validate({size:1})\n//validate.error \u662f\u4e2a\u5bf9\u8c61\u3002\u5176\u4e2d\u4f1a\u6709\u9519\u8bef\u4fe1\u606f\u5982\u4e0b\u3002error \u5177\u4f53\u7ed3\u6784\u53c2\u8003",Object(o.b)("a",Object(t.a)({parentName:"p"},{href:"https://www.npmjs.com/package/ajv-errors"}),"https://www.npmjs.com/package/ajv-errors"),'\n//"size should be a number bigger or equal to 4, current value is 1"'),Object(o.b)("pre",null,Object(o.b)("code",Object(t.a)({parentName:"pre"},{}),'\n\u53ef\u4ee5\u5c06 minimum \u8bbe\u7f6e\u6210\u4e00\u4e2a\u53d8\u91cf\uff0c\u7136\u540e errorMessage \u914d\u5408\u53d8\u91cf\u548c es6 \u6a21\u677f\u5b57\u7b26\u4e32\u8fbe\u5230\u6539\u53d8\u53d8\u91cf\uff0c\u81ea\u52a8\u66f4\u6539\u6821\u9a8c\u63d0\u793a\u3002\n\n\u6ce8\u610f\uff1ajson pointer \u9700\u8981\u4f7f\u7528\\\u8f6c\u4e49\n\n```json\n//\u540c\u4e0a\u4e00\u4e2a\u6821\u9a8c\nconst minimum = 4\nvar schema = {\n  "type": "object",\n  "properties": {\n    "size": {\n      "type": "number",\n      minimum\n    }\n  },\n  "errorMessage": {\n    "properties": {\n      "size": `size should be a number bigger or equal to ${minimum}, current value is \\${/size}`\n    }\n  }\n}\n')),Object(o.b)("h2",{id:"\u53c2\u8003"},"\u53c2\u8003"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("a",Object(t.a)({parentName:"li"},{href:"https://www.npmjs.com/package/ajv-errors"}),"ajv-errors readme"))))}b.isMDXComponent=!0}}]);